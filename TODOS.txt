Resumen del plan (alto nivel)

Fase 0 (MVP mínimo): move_file robusto + unique_name + reglas básicas + dry-run + tests.
Fase 1: logging en SQLite (historial) + undo.
Fase 2: watcher (watchdog) + wait_until_stable.
Fase 3: filtros/motor de reglas, extractores de metadata.
Fase 4: UI mínima (PySimpleGUI) y packaging.
Estructura de módulos recomendada

core/fs_utils.py → operaciones de archivos (move, unique_name, safe_replace)
core/media_utils.py → resize image/video wrappers
core/metadata.py → extract_exif, extract_text
engine/rules.py → Rule class, load_rules, validate_rule
engine/matchers.py → matchers (extension, prefix, regex, content)
engine/engine.py → evaluate_file, apply_actions
watcher/watcher.py → watcher usando watchdog
persistence/db.py → SQLite helpers (log_action, get_last_action, undo_action)
cli/main.py → comandos run/scan/dry-run/new-rule
ui/gui.py → interfaz mínima (opcional)
tests/ → tests unitarios con tmpdir

 --------------------------------------------------------------------
PROJECT: Sorted - File Auto-Organizer (like organize, but better)

CURRENT STATUS:
- Project structure created: core/, engine/, cli/, persistence/, tests/
- Completed modules:
  * core/fs_utils.py: move_file() & get_desktop_path() functions
  * engine/engine.py: apply_rules() function with error handling
  * cli/main.py: entry point that runs apply_rules()
- All __init__.py files created in each folder
- Can run with: python -m cli.main

NEXT PHASE: SQLite Database (Persistence)
- Need to create: persistence/db.py
- Purpose: Log file moves for undo functionality
- What to track: source_path, destination_path, timestamp, rule_name, move_id
- Functions needed: log_move(), get_last_move(), delete_move(), undo()

NEXT STEPS:
1. Design the file_moves table schema in SQLite
2. Create FileHistoryDB class in persistence/db.py
3. Integrate database logging into apply_rules()
4. Implement undo functionality
5. Add dry-run mode (show what would happen without doing it)

TEACHING STYLE: Guide only, no complete solutions - user learns by thinking through problems

TECH STACK: Python, SQLite, pathlib, shutil